var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&n(e,o,l[o]);if(a)for(var o of a(l))r.call(l,o)&&n(e,o,l[o]);return e};import{_ as o,ae as i,l as d,ak as s,ag as c,h as m,b as p,k as u}from"./vendor.931d8f24.js";import{u as f}from"./useList.da577dd6.js";import{u as y}from"./useVisible.7f795f63.js";import{L as E}from"./index.54d80d25.js";import{r as b}from"./index.d0ed3dc5.js";import{a as h}from"./index.6547ff7d.js";const x=e=>{const{params:t={},onCancel:a,onOk:r}=e,{title:n,type:l,record:i}=t,u=o.useMemo((()=>d.createAsyncFormActions()),[]),f=o.useMemo((()=>"add"===l?{type:1,onOff:!1}:i),[i]),y={name:{required:!0,type:"string",title:"任务名称"},method:{required:!0,type:"string",title:"执行方法"},description:{type:"textarea",title:"任务描述"}};return o.createElement(s,{visible:!0,centered:!0,title:n,onCancel:a,footer:o.createElement(o.Fragment,null,"detail"===l?o.createElement(c,{type:"primary",onClick:a},"确定"):o.createElement(o.Fragment,null,o.createElement(c,{onClick:a},"取消"),o.createElement(c,{type:"primary",onClick:()=>u.submit()},"确定")))},o.createElement(m,{labelCol:6,wrapperCol:16,actions:u,onSubmit:e=>b.post("/dev-ops/monitor/editAlarm",e).then((e=>{p.success(`${n}成功`),r()})),previewPlaceholder:"暂无数据",editable:"detail"!==l,initialValues:f,schema:{type:"object",properties:h(y)}}))},{Header:C,Content:j}=E;export default()=>{const e=y(),t=f("/dev-ops/monitor/alarmList");o.useEffect((()=>{t.onSearch()}),[]);const a=(e=>{const{handleEdit:t,handleDetail:a}=e;return[{title:"id",dataIndex:"id"},{title:"名字",dataIndex:"name"},{title:"描述",dataIndex:"description"},{title:"执行方法",dataIndex:"method"},{title:"操作",dataIndex:"id",width:140,render:(e,r)=>o.createElement(i,null,o.createElement("a",{onClick:()=>t(r)},"编辑"),o.createElement("a",{onClick:()=>a(r)},"详情"))}]})({handleEdit:t=>{e.open({title:"编辑报警规则",type:"edit",record:t})},handleDetail:t=>{e.open({title:"报警规则详情",type:"detail",record:t})}});return o.createElement(E,{loading:t.loading},o.createElement(C,{title:"报警规则",extra:o.createElement(c,{type:"primary",onClick:()=>{e.open({title:"添加报警规则",type:"add"})}},"添加报警规则")}),o.createElement(j,null,o.createElement(u,l(l({columns:a},t.table),{scroll:{x:"max-content"}}))),e.visible&&o.createElement(x,{params:e.params,onCancel:e.close,onOk:()=>{e.close(),t.onRefresh()}}))};

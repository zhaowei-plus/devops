var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,d=(e,d)=>{for(var l in d||(d={}))t.call(d,l)&&n(e,l,d[l]);if(a)for(var l of a(d))r.call(d,l)&&n(e,l,d[l]);return e};import{_ as l,k as s,aj as o}from"./vendor.931d8f24.js";import{u as i}from"./useList.da577dd6.js";import{L as c}from"./index.54d80d25.js";import{S as m}from"./index.cd79d446.js";import"./index.d0ed3dc5.js";import{m as u,f}from"./index.6547ff7d.js";import{T as p,E as x}from"./constant.79d8e8f2.js";const{Header:y,Content:b}=c;export default()=>{const e=i("/dev-ops/devops/db/sqlList");l.useEffect((()=>{e.onSearch()}),[]);const n={"[executeStart,executeEnd]":{type:"daterange",title:"操作时间","x-props":{placeholder:["开始时间","结束时间"]}},type:{type:"string",title:"任务类型",enum:[{label:"查询",value:1},...p]},status:{type:"string",title:"状态",enum:x},name:{type:"string",title:"用户名"}},v=[{title:"用户名",dataIndex:"userName"},{title:"sql",dataIndex:"sql"},{title:"数据库名",dataIndex:"dbName"},{title:"任务类型",dataIndex:"type",render:e=>u(e,p)},{title:"状态",dataIndex:"status",render:e=>u(e,x)},{title:"执行时间",dataIndex:"gmtExecute",render:e=>f(e,"YYYY-MM-DD HH:mm:ss")},{title:"原因",dataIndex:"reason"}];return l.createElement(c,{loading:e.loading},l.createElement(y,{title:"操作记录列表"}),l.createElement(b,null,l.createElement(m,{schema:n,onSearch:(n={})=>{const{executeStart:d,executeEnd:l}=n,s=((e,n)=>{var d={};for(var l in e)t.call(e,l)&&n.indexOf(l)<0&&(d[l]=e[l]);if(null!=e&&a)for(var l of a(e))n.indexOf(l)<0&&r.call(e,l)&&(d[l]=e[l]);return d})(n,["executeStart","executeEnd"]);d&&l&&(s.executeStart=o(d).startOf("day").valueOf(),s.executeEnd=o(l).startOf("day").valueOf()),e.onSearch(s)}}),l.createElement(s,d(d({columns:v},e.table),{scroll:{x:"max-content"}}))))};
